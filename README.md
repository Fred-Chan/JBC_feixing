# Botball 飞行挑战 A 计分系统

## 项目概述

这是一个为 Botball 飞行挑战 A 比赛设计的在线计分系统，支持多队伍、多轮次的成绩录入、统计和排名功能。

**在线地址：** https://jbc-feixing.vercel.app

**GitHub 仓库：** https://github.com/Fred-Chan/JBC_feixing

## 功能特性

### 计分页面 (index.html)

1. **基本信息录入**
   - 队伍编号
   - 第几次（1-8次，下拉选择）
   - 场地编号

2. **7个任务计分**
   | 任务 | 内容 | 分值 |
   |------|------|------|
   | a | 在数字圆圈 1 完成①水平环绕 | 10分 |
   | b | 在黄色方块区完成⑤定点降落 | 20分 |
   | c | 在数字圆圈 10 完成④穿越峡谷 | 10分 |
   | d | 在蓝色方块区完成⑤定点降落 | 20分 |
   | e | 在数字圆圈 7 完成②垂直环绕 | 10分 |
   | f | 在数字圆圈 2 完成③穿越隧道 | 10分 |
   | g | 在启动区任意位置完成⑤定点降落 | 20分 |

3. **任务顺序锁定逻辑**
   - 必须按 a→b→c→d→e→f→g 顺序完成
   - 任务 a 要开始第 N 轮，必须先完成任务 g 的第 N-1 次
   - 形成完整循环：每轮都要从 a 跑到 g

4. **数据管理**
   - 保存：保存当前录入的成绩
   - 重置：清空当前表单
   - 历史：查看所有历史记录，支持编辑和清空
   - 导出：导出 CSV 文件

### 排名统计页面 (ranking.html)

1. **统计概览**
   - 参赛队伍数
   - 比赛记录数
   - 最高总分
   - 平均总分

2. **实时排名表**
   - 按总分排序
   - 显示每队8轮成绩（空位显示 `-`）
   - 前三名金银铜牌标识
   - 5秒自动刷新（可关闭）

3. **队伍详情**
   - 显示8个固定轮次位置
   - 有数据：显示场地、时间、各任务完成次数、得分，可编辑/清空
   - 空位：显示"录入"按钮，点击跳转到计分页

4. **导出排名**
   - 导出包含排名、队伍、各轮得分、总分的 CSV 文件

## 数据结构

数据存储在浏览器 localStorage 中，key 为 `botball_data`：

```javascript
{
  "队伍A": {
    "rounds": {
      "1": {
        "fieldId": "场地1",
        "tasks": { "a": 2, "b": 2, "c": 1, ... },
        "total": 100,
        "timestamp": "2024/12/26 15:30:00"
      },
      "3": { ... },  // 第2次为空，第3次有数据
      ...
    }
  },
  "队伍B": { ... }
}
```

**关键设计：**
- 每个队伍有固定的8个轮次位置（1-8）
- 清空某一次成绩只删除该位置数据，不影响其他轮次
- 轮次位置与纸质成绩单完全对应

## 技术栈

- 纯前端实现（HTML + CSS + JavaScript）
- 无需后端服务器
- 数据存储在浏览器 localStorage
- 响应式设计，支持移动端

## 部署

项目已部署到 Vercel，与 GitHub 仓库自动同步。

每次 push 到 main 分支，Vercel 会自动重新部署。

## 开发记录

### 2024-12-26

1. **创建基础计分表**
   - 实现7个任务的计分功能
   - 使用加减号按钮控制完成次数

2. **添加任务顺序锁**
   - 必须按 a→g 顺序完成
   - 完成一整轮才能开始下一轮

3. **创建排名统计页面**
   - 实时排名、队伍详情
   - 自动刷新功能

4. **添加编辑功能**
   - 历史记录支持编辑和删除
   - 排名详情页支持编辑

5. **重构数据结构**
   - 改为固定8轮次位置存储
   - 清空成绩保留位置，不递补
   - 支持补录任意空位

6. **部署上线**
   - GitHub 仓库：Fred-Chan/JBC_feixing
   - Vercel 自动部署

7. **修复移动端显示**
   - 修复分值换行问题

## 后续可能的改进

- [ ] 添加数据备份/恢复功能
- [ ] 支持多设备数据同步（需要后端）
- [ ] 添加打印功能
- [ ] 支持自定义任务配置
